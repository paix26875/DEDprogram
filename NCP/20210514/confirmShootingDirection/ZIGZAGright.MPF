
N10 DEF REAL SetLaser, SetPowder1, SetCarriergas1, SetStirrerSpeed1, SetPowder2, SetCarriergas2, SetStirrerSpeed2
;Laser parameters
N20 DEF REAL LAYERHEIGHT,NUMBERLAYERS,FEED,LENGTH
N30 DEF REAL STARTX,STARTY,STARTZ,STARTC
N40 DEF REAL COUNTER,DWELL
N50 DEF REAL APPROACH
N60 DEF REAL POWER, MAXPOWER
N70 MAXPOWER=2000
R1=0

;*****PROGRAM VARIABLES*****
N80 LENGTH=35         ;LENGTH OF WALL
N90 LAYERHEIGHT=0.4  ;LAYER HEIGHT
N100 NUMBERLAYERS=10  ;NUMBER OF PROGRAMMED LAYERS
N110 FEED=1000         ;FEED RATE IN MM/MIN
N120 DWELL=6          ;DWELL TIME IN SECONDS
N130 APPROACH=5       ;OVER TRAVEL AMOUNT

;START POSITION
N140 STARTX=35
N150 STARTY=95
N160 STARTZ=0
N170 STARTC=0

N180 ; Settings Parameter Laser
N190 POWER=2000
N200 SetLaser=1600 ;POWER/MAXPOWER*27600 ;2000W ;H52 LASER POWER in mV
N210 SetPowder1=0 ; H53 SPEED POWDER DISC HOPPER 1 in mV ...1000 => 0..10 U/min
N220 SetCarriergas1= 0; H54 CARRIER GAS FLOW HOPPER 1 in mV 0..1000 => 0..10 U/min
N230 SetStirrerSpeed1=0 ; H55 STIRRER SPEED HOPPER 1 in mV 0..1000 => 0.. 100 percent
N240 SetPowder2=471 ; H56 SPEED POWDER DISC HOPPER 2 in mV ...1000 => 0..10 U/min
N250 SetCarriergas2=600 ; H57 CARRIER GAS FLOW HOPPER 2 in mV 0..1000 => 0..10 U/min
N260 SetStirrerSpeed2=500 ; H58 STIRRER SPEED HOPPER 2 in mV 0..1000 => 0.. 100 percent
;******************************
N270 STOPRE

N280 G54

N290 DM_RAPID(10) ;RAPID LIMIT IN %

N300 TRAFOOF

N310 G0 G153 Z0 D0
N320 G0 A0 C=DC(0)

;*****TOOL CHANGE*****
;!!!RAPID = 10% FOR LASER TOOL CHANGE!!!
N330 DM_RAPID(10) 
N340 T="LASER"
N350 M6
;*********************


N370 G0 G153 Z0 D0
N380 G0 A0 C=DC(STARTC)
;G0 G153 X0 Y0 
N390 D1

N400 STOPRE

;START POSITION
N410 G0 X=STARTX Y=STARTY
N420 G0 Z=STARTZ

N420 LASER_CONTROLLER_PARAM_ID=4
N430 IS_LASER_CONTROLLED=0

N380 Cladding_Para_on(SetLaser, SetPowder1, SetCarriergas1, SetStirrerSpeed1, SetPowder2, SetCarriergas2, SetStirrerSpeed2)

;*****DEPOSITION_01*****
N430 FOR COUNTER=1 TO NUMBERLAYERS/2

N490 G1 Y=IC(-APPROACH) F=FEED 
N500 Y=IC(-LENGTH) ;M174
N510 Y=IC(-APPROACH) ;M175
N520 Z=IC(LAYERHEIGHT)
N530 G4 F=DWELL  ;DWELL

N440 G1 Y=IC(APPROACH) F=FEED 
N450 Y=IC(LENGTH) ;M174
N460 Y=IC(APPROACH) ;M175
N470 Z=IC(LAYERHEIGHT)
N480 G4 F=DWELL  ;DWELL

STOPRE

N540 ENDFOR
N550 STOPRE

N560 Cladding_Para_off ;RESET CLADDING PARAMETER
;N430 IS_LASER_CONTROLLED=0


N570 G0 G153 Z0 D0	;Z AXIS MACHINE HOME

N580 STOPRE
 
N590 D1
N600 G0 G153 X620 	;X & Y AXIS WORK HO

N610 M30;END

