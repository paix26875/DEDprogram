
N10 DEF REAL SetLaser, SetPowder1, SetCarriergas1, SetStirrerSpeed1, SetPowder2, SetCarriergas2, SetStirrerSpeed2
;Laser parameters
N20 DEF REAL LAYERHEIGHT,NUMBERLAYERS,FEED,LENGTH
N30 DEF REAL STARTX,STARTY,STARTZ,STARTC
N40 DEF REAL APPROACH
N40 DEF REAL COUNTER,DWELL
N50 DEF REAL POWER, MAXPOWER
N60 MAXPOWER=2000

;*****PROGRAM VARIABLES*****
N80 LENGTH=40         ;LENGTH OF WALL
N90 LAYERHEIGHT=0.4  ;LAYER HEIGHT
N100 NUMBERLAYERS=12  ;NUMBER OF PROGRAMMED LAYERS
N110 FEED=1000         ;FEED RATE IN MM/MIN
N120 DWELL=6          ;DWELL TIME IN SECONDS
N130 APPROACH=5       ;OVER TRAVEL AMOUNT

;START POSITION
N100 STARTX=0
N110 STARTY=0
N120 STARTZ=10
N130 STARTC=0

N140 ; Settings Parameter Laser
N150 POWER=2000
N160 SetLaser=1600 ;2000W ;H52 LASER POWER in mV
N170 SetPowder1=0 ; H53 SPEED POWDER DISC HOPPER 1 in mV 0..1000 => 0..10 U/min
N180 SetCarriergas1=0 ; H54 CARRIER GAS FLOW HOPPER 1 in mV 0..1000 => 0..10 U/min
N190 SetStirrerSpeed1=0 ; H55 STIRRER SPEED HOPPER 1 in mV 0..1000 => 0.. 100 percent
N200 SetPowder2=471 ; H56 SPEED POWDER DISC HOPPER 2 in mV ...1000 => 0..10 U/min
N210 SetCarriergas2=600 ; H57 CARRIER GAS FLOW HOPPER 2 in mV 0..1000 => 0..10 U/min
N220 SetStirrerSpeed2=500 ; H58 STIRRER SPEED HOPPER 2 in mV 0..1000 => 0.. 100 percent

;******************************
N230 STOPRE

N240 G510

N250 DM_RAPID(10) ;RAPID LIMIT IN %

N260 TRAFOOF

N270 G0 G153 Z0 D0
N280 G0 A0 ;C=DC(0)

;*****TOOL CHANGE*****
;!!!RAPID = 10% FOR LASER TOOL CHANGE!!!
N290 DM_RAPID(10) 
N300 T="LASER"
N310 M6
;*********************

N320 G0 G153 Z0 D0
N330 G0 A0 ;C=DC(STARTC)
N340 D1

N350 STOPRE

;START POSITION
N360 G0 X=STARTX Y=STARTY
N370 G0 Z=STARTZ ;C=STARTC

N420 LASER_CONTROLLER_PARAM_ID=4
N430 IS_LASER_CONTROLLED=0

N380 Cladding_Para_on(SetLaser, SetPowder1, SetCarriergas1, SetStirrerSpeed1, SetPowder2, SetCarriergas2, SetStirrerSpeed2)

;*****DEPOSITION_01*****
N430 FOR COUNTER=1 TO NUMBERLAYERS/2
N440 G1 X=IC(APPROACH) F=FEED 
N450 X=IC(LENGTH) M174
N460 X=IC(APPROACH) M175
N470 Z=IC(LAYERHEIGHT)

N480 G4 F=DWELL  ;DWELL
R1=R1+1
STOPRE

N490 G1 X=IC(-APPROACH) F=FEED 
N500 X=IC(-LENGTH) M174
N510 X=IC(-APPROACH) M175
N520 Z=IC(LAYERHEIGHT)

N530 G4 F=DWELL  ;DWELL
R1=R1+1

STOPRE
H52=R50
STOPRE

N540 ENDFOR
N550 STOPRE

N430 Cladding_Para_off ;RESET CLADDING PARAMETERS

N440 G0 G153 Z0 D0	;Z AXIS MACHINE HOME

N450 STOPRE
 
N460 D1
;N470 G0 G153 X620 	;X & Y AXIS WORK HOME

N480 M30;END
